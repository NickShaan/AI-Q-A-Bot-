# Tiny Q&A (Gemini)

> **About**  
> Tiny Q&A (Gemini) is an AI-powered question & answer app that gives concise, accurate answers to user queries in real time. Users type (or choose) a question and receive a short answer generated by Google Gemini. Answers may be saved to a backend PostgreSQL database for later review.

---

## Demo / Examples
Try these example questions in the app:
- What is Python?  
- Explain REST APIs in 2 sentences.  
- How does PostgreSQL differ from MySQL?  
- Give a one-paragraph summary of transformers.

ðŸŽ¥ **Demo Video:** I have also uploaded a working demo video of this project showing the complete flow from question input to AI response and database saving.

---

## Key Features
- Single-page, lightweight UI (Streamlit) for quick Q&A interaction.
- Backend API (FastAPI) that forwards questions to Google Gemini and returns answers.
- Optional persistence: store question/answer pairs in PostgreSQL (`qa_history` table).
- Session history, CSV export, copy-to-clipboard, and example quick-ask buttons.
- Hidden settings for backend URL with a health check.
- Graceful fallback: backend works without DB configured (runs in no-persistence mode).

---

## Technology Stack & Versions
- **Python:** 3.11 (tested)
- **Backend:** FastAPI, Uvicorn
- **AI SDK:** google-genai (wrapper supports multiple SDK shapes)
- **DB:** PostgreSQL (async runtime via `databases` + `asyncpg`; `psycopg2-binary` used for sync DDL)
- **ORM / Schema:** SQLAlchemy (metadata)
- **Frontend:** Streamlit
- **Utilities:** requests, pandas (CSV export)

---

## Project Structure
```
project-root/
â”œâ”€ qna-backend/
â”‚  â”œâ”€ .env                     # environment variables (example below)
â”‚  â”œâ”€ requirements.txt         # backend deps
â”‚  â”œâ”€ app/
â”‚  â”‚  â”œâ”€ __init__.py
â”‚  â”‚  â”œâ”€ main.py               # FastAPI app (endpoints, startup/shutdown)
â”‚  â”‚  â”œâ”€ db.py                 # DB connection, init_db(), save_qa()
â”‚  â”‚  â”œâ”€ schemas.py
â”‚  â”‚  â””â”€ services/
â”‚  â”‚     â””â”€ ai_client.py       # adaptive Gemini wrapper
â”‚  â””â”€ scripts/
â”‚     â””â”€ init_db.py            # optional convenience script
â””â”€ qna-frontend/
   â”œâ”€ streamlit_app.py         # Streamlit UI
   â””â”€ requirements.txt         # frontend deps
```

---

## Environment Variables (.env example)
Create a `.env` file inside `qna-backend/` with these keys:

```
GEMINI_API_KEY=your_real_gemini_key_here
GEMINI_MODEL=gemini-2.5-flash

DB_USER=postgres
DB_PASSWORD=
DB_HOST=localhost
DB_PORT=
DB_NAME=

FRONTEND_URL=
```

---

## Installation & Run (Windows PowerShell)

### Backend setup
```powershell
# from project-root/qna-backend
python -m venv .venv
.\.venv\Scripts\Activate.ps1
python -m pip install --upgrade pip
pip install -r requirements.txt

# create .env with your keys (see example above)
# run the backend
.\.venv\Scripts\python.exe -m uvicorn app.main:app --reload --port 8000
```

### Frontend (Streamlit) setup
```powershell
# from project-root/qna-frontend
python -m venv .venv
.\.venv\Scripts\Activate.ps1
python -m pip install --upgrade pip
pip install -r requirements.txt

streamlit run streamlit_app.py
```

---

## End-to-end Test
1. Start PostgreSQL (if using DB).  
2. Start backend (see commands above).  
3. Start frontend (Streamlit).  
4. Open Streamlit UI and ask a question or use an example button.  
5. Confirm the answer displays and DB inserts if configured.

---

## Troubleshooting
- **Missing package:** `pip install databases asyncpg`
- **Gemini SDK errors:** `pip install -U google-genai`
- **greenlet_spawn error:** fixed by sync DDL URL and psycopg2-binary.
- **Port bind error:** kill the existing process or use another port.
- **Streamlit rerun issue:** resolved in the final app.

---

## Security & Production Notes
- Protect `GEMINI_API_KEY` (never commit `.env`).
- Use auth & rate limiting for public endpoints.
- Sanitize any model output rendered in UI.

---

## Optional Next Steps
- Add GET /history to load past Q&A.
- Replace prints with structured logging.
- Containerize with Docker.
- Add CI tests and auto deployments.

---
